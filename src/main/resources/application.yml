spring:
  application:
    name: gold-price-alert
  config:
    import: optional:file:${GOLD_SECRET_CONFIG:/data/profiles/mail-secrets.yml}
  datasource:
    url: jdbc:mysql://${GOLD_DB_HOST:10.140.0.2}:${GOLD_DB_PORT:3306}/${GOLD_DB_NAME:alert}?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC
    username: ${GOLD_DB_USERNAME:root}
    password: ${GOLD_DB_PASSWORD:}
    driver-class-name: com.mysql.cj.jdbc.Driver
  mail:
    host: smtp.163.com
    port: 465
    username: ${GOLD_MAIL_USERNAME:}
    password: ${GOLD_MAIL_PASSWORD:}
    protocol: smtp
    properties:
      mail.smtp.ssl.enable: true
      mail.smtp.auth: true
      mail.smtp.connectiontimeout: 5000
      mail.smtp.timeout: 5000
      mail.smtp.writetimeout: 5000

mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true

server:
  port: 80

gold:
  api-url: https://api.gold-api.com/price/XAU
  fetch-interval: 1m
  log-dir: ${GOLD_LOG_DIR:/app/logs}
  alert:
    mail:
      sender: ${GOLD_MAIL_SENDER:}
      recipients: ${GOLD_MAIL_RECIPIENTS:}
      min-level: ${GOLD_MAIL_MIN_LEVEL:MINOR_LEVEL}
      cooldowns:
        INFO_LEVEL: ${GOLD_MAIL_COOLDOWN_INFO:30m}
        MINOR_LEVEL: ${GOLD_MAIL_COOLDOWN_MINOR:15m}
        MODERATE_LEVEL: ${GOLD_MAIL_COOLDOWN_MODERATE:10m}
        MAJOR_LEVEL: ${GOLD_MAIL_COOLDOWN_MAJOR:5m}
        CRITICAL_LEVEL: ${GOLD_MAIL_COOLDOWN_CRITICAL:0m}
